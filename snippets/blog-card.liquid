{%- comment -%}
  Blog Card Snippet
  
  Usage:
  {% render 'blog-card', 
    article: article,
    show_excerpt: true,
    show_date: true,
    show_author: false,
    show_read_time: true,
    show_tags: true,
    read_more_text: 'Read More',
    image_aspect_ratio: '16/9'
  %}
{%- endcomment -%}

{%- liquid
  assign article = article
  assign show_excerpt = show_excerpt | default: true
  assign show_date = show_date | default: true
  assign show_author = show_author | default: false
  assign show_read_time = show_read_time | default: true
  assign show_tags = show_tags | default: true
  assign read_more_text = read_more_text | default: 'Read More'
  assign image_aspect_ratio = image_aspect_ratio | default: '16/9'
-%}

<article class="blog-card">
  {%- if article.image -%}
    <div class="blog-card__image-wrapper" style="aspect-ratio: {{ image_aspect_ratio }};">
      <a href="{{ article.url }}" aria-label="{{ 'blog.article.view_article' | t: title: article.title }}">
        {{- article.image | image_url: width: 600 | image_tag: 
          loading: 'lazy',
          sizes: '(min-width: 990px) calc(50vw - 3rem), (min-width: 750px) calc(50vw - 2rem), calc(100vw - 3rem)',
          widths: '300, 400, 500, 600, 700, 800',
          alt: article.image.alt | default: article.title,
          class: 'blog-card__image'
        -}}
      </a>
    </div>
  {%- endif -%}

  <div class="blog-card__content">
    {%- if show_tags and article.tags.size > 0 -%}
      <div class="blog-card__tags">
        {%- for tag in article.tags limit: 2 -%}
          <a href="{{ blog.url }}/tagged/{{ tag | handle }}" class="blog-card__tag">
            {{ tag }}
          </a>
        {%- endfor -%}
      </div>
    {%- endif -%}

    <h3 class="blog-card__title">
      <a href="{{ article.url }}" class="blog-card__title-link">
        {{ article.title }}
      </a>
    </h3>

    {%- if show_excerpt and article.excerpt != blank -%}
      <div class="blog-card__excerpt rte">
        {{ article.excerpt | strip_html | truncatewords: 20 }}
      </div>
    {%- endif -%}

    {%- if show_date or show_author or show_read_time -%}
      <div class="blog-card__meta">
        {%- if show_date -%}
          <time datetime="{{ article.published_at | date: '%Y-%m-%d' }}">
            {{ article.published_at | date: format: 'abbreviated_date' }}
          </time>
        {%- endif -%}
        
        {%- if show_author and article.author != blank -%}
          <span>{{ 'blog.article.by_author' | t: author: article.author }}</span>
        {%- endif -%}
        
        {%- if show_read_time -%}
          {%- assign words = article.content | strip_html | split: ' ' | size -%}
          {%- assign read_time = words | divided_by: 200 | at_least: 1 -%}
          <span>{{ read_time }} {{ 'blog.article.min_read' | t }}</span>
        {%- endif -%}
      </div>
    {%- endif -%}

    <div class="blog-card__footer">
      <a href="{{ article.url }}" class="blog-card__read-more">
        {{ read_more_text }}
        <svg class="blog-card__read-more-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
        </svg>
      </a>
    </div>
  </div>
</article>
